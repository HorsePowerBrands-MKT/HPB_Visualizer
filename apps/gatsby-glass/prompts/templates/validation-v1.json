{
  "id": "validation-v1",
  "version": "1.1.0",
  "name": "Image Validation Prompt",
  "type": "validation",
  "description": "Prompt template for validating bathroom images, detecting shower shape, and screening for PII/inappropriate content",
  "sections": [
    {
      "id": "task",
      "type": "header",
      "content": [
        "Analyze this image. Perform THREE checks in order: (1) content safety, (2) bathroom validation, (3) feature detection."
      ]
    },
    {
      "id": "content_safety",
      "type": "instructions",
      "content": [
        "",
        "CONTENT SAFETY CHECK (do this FIRST):",
        "Scan the image for the following. If ANY are found, set isValid to false and set the appropriate contentFlag:",
        "",
        "PII / Personal Information:",
        "- Human faces that are clearly identifiable (not blurry reflections or distant/tiny figures)",
        "- Readable personal documents, IDs, mail, or papers with names/addresses",
        "- Visible credit cards, financial documents, or account numbers",
        "- Readable phone numbers, email addresses, or social media handles",
        "- Children in any context",
        "If PII is detected, set contentFlag to 'pii'.",
        "",
        "Inappropriate Content:",
        "- Nudity or sexually explicit content",
        "- Graphic violence or gore",
        "- Illegal activities",
        "If inappropriate content is detected, set contentFlag to 'inappropriate'.",
        "",
        "If the image is safe, set contentFlag to 'safe'.",
        "",
        "IMPORTANT: Blurry reflections in mirrors or glass do NOT count as identifiable faces. Only flag clear, identifiable people. A person's hand or arm in frame is fine â€” only flag identifiable faces."
      ]
    },
    {
      "id": "guidelines",
      "type": "instructions",
      "content": [
        "",
        "BATHROOM VALIDATION (only if content is safe):",
        "Be VERY LENIENT - if you see tiles, shower fixtures, bathroom walls, a tub, or any bathroom space where a shower door could be installed, answer YES (isValid: true).",
        "",
        "Only reject if it's clearly NOT a bathroom at all (like outdoors, kitchen, living room, etc)."
      ]
    },
    {
      "id": "shape_detection",
      "type": "specifications",
      "content": [
        "",
        "SHAPE DETECTION:",
        "If valid, determine the shower layout shape:",
        "- 'neo_angle': Corner shower with angled glass panels forming a diamond/pentagon shape",
        "- 'tub': Bathtub with or without existing shower",
        "- 'standard': Straight wall alcove, inline, or 90-degree return"
      ]
    },
    {
      "id": "hardware_detection",
      "type": "specifications",
      "content": [
        "",
        "HARDWARE DETECTION:",
        "If the image shows existing shower hardware (handles, hinges, towel bars, fixtures), identify the finish:",
        "- 'chrome': Shiny silver/mirror-like metal",
        "- 'brushed_nickel': Matte/satin silver with brushed texture",
        "- 'matte_black': Flat black metal",
        "- 'polished_brass': Gold/brass-toned shiny metal",
        "- 'oil_rubbed_bronze': Dark brown/bronze metal",
        "- 'none': No hardware visible or cannot determine",
        "Set detectedHardware to the best match, or 'none' if unclear."
      ]
    },
    {
      "id": "response_format",
      "type": "custom",
      "content": [
        "",
        "RESPONSE FORMAT:",
        "Return JSON with:",
        "- isValid (boolean): false if content safety fails OR not a bathroom",
        "- reason (string, only if invalid): user-friendly explanation",
        "- contentFlag (string: 'safe', 'pii', or 'inappropriate')",
        "- shape (string: 'standard', 'neo_angle', or 'tub')",
        "- detectedHardware (string: 'chrome', 'brushed_nickel', 'matte_black', 'polished_brass', 'oil_rubbed_bronze', or 'none')"
      ]
    }
  ],
  "variables": [],
  "metadata": {
    "createdAt": "2026-01-27T00:00:00.000Z",
    "updatedAt": "2026-02-05T00:00:00.000Z",
    "author": "Gatsby Glass Team",
    "tags": ["validation", "image-analysis", "shape-detection", "content-safety", "pii"],
    "notes": "Used to validate uploaded images, screen for PII/inappropriate content, and detect shower configuration"
  }
}
